# ProtFill
`ProtFill` is an inpainting co-design model that works on antibodies as well as other proteins.

## Installation
```bash
cd protfill
conda create --name protfill python=3.10
conda activate protfill
python -m pip install .
```

## Data
The datasets can be downloaded from `proteinflow`. 
```
proteinflow download --tag 20230102_stable

proteinflow download --tag 20230626_sabdab --skip_splitting
rm -r data/proteinflow_20230626_sabdab/splits_dict/
mv data/splits_dict data/proteinflow_20230626_sabdab/
proteinflow split --tag 20230626_sabdab
```

## Training
Run this command to train the ProtFill model on the anti
```
protfill --dataset_path ... --batch_size 8
```

## Validation
In order to test on the 'easy' test subset, run the following command.
```
protfill --dataset_path ... --batch_size 8 --load_checkpoint ... --easy_test
```

To test on the 'hard' subset, replace `--easy_test` with `--hard_test`. To test on a specific CDR, add e.g. `--test_cdr H3`. Note that the 'hard' subset does not contain light chains.

## Generation
To redesign a part of a new file, run the following. The file can have either a `.pdb` or  a `.pickle` extension, with the pickle files generated by `proteinflow`.
```bash
protfill --
```

